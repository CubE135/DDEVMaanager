const exec = require('child_process').exec;

module.exports = class CmdClient {
    getDDEVProjectList(callback) {
        exec(`ddev list -j`, (error, stdout, stderr) => {
            stdout = `{"level":"info","msg":"NAME             TYPE       LOCATION                                         URL  STATUS \ndfwebseite       wordpress  ~/Documents/Development/Docker/dfwebseite             stopped\nfelgencalc       php        ~/Documents/Development/Docker/felgencalc             stopped\nfelgenexport     php        ~/Documents/Development/Docker/felgenexport           stopped\nfelgenshop       php        ~/Documents/Development/Docker/felgenshop             stopped\nlager            php        ~/Documents/Development/Docker/lager                  stopped\nmitarbeiterddev  php        ~/Documents/Development/Docker/mitarbeiter_ddev       stopped\nsmt              php        ~/Documents/Development/Docker/smt                    stopped\nsportauspuff     php        ~/Documents/Development/Docker/sportauspuff           stopped\nsportfahrwerk    php        ~/Documents/Development/Docker/sportfahrwerk          stopped\nvelonity         php        ~/Documents/Development/Docker/velonity               stopped\nwari3            php        ~/Documents/Development/Docker/wari3                  paused \n\nDDEV ROUTER STATUS: exited\nThe router is not yet healthy. Your projects may not be accessible.\nIf it doesn't become healthy try running 'ddev start' on a project to recreate it.\n","raw":[{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\dfwebseite","httpsurl":"https://dfwebseite.ddev.site","httpurl":"http://dfwebseite.ddev.site","name":"dfwebseite","primary_url":"https://dfwebseite.ddev.site","shortroot":"~/Documents/Development/Docker/dfwebseite","status":"stopped","type":"wordpress"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\felgencalc","httpsurl":"https://felgencalc.ddev.site","httpurl":"http://felgencalc.ddev.site","name":"felgencalc","primary_url":"https://felgencalc.ddev.site","shortroot":"~/Documents/Development/Docker/felgencalc","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\felgenexport","httpsurl":"https://felgenexport.ddev.site","httpurl":"http://felgenexport.ddev.site","name":"felgenexport","primary_url":"https://felgenexport.ddev.site","shortroot":"~/Documents/Development/Docker/felgenexport","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\felgenshop","httpsurl":"https://felgenshop.ddev.site","httpurl":"http://felgenshop.ddev.site","name":"felgenshop","primary_url":"https://felgenshop.ddev.site","shortroot":"~/Documents/Development/Docker/felgenshop","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\lager","httpsurl":"https://lager.ddev.site","httpurl":"http://lager.ddev.site","name":"lager","primary_url":"https://lager.ddev.site","shortroot":"~/Documents/Development/Docker/lager","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\mitarbeiter_ddev","httpsurl":"https://mitarbeiterddev.ddev.site","httpurl":"http://mitarbeiterddev.ddev.site","name":"mitarbeiterddev","primary_url":"https://mitarbeiterddev.ddev.site","shortroot":"~/Documents/Development/Docker/mitarbeiter_ddev","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\smt","httpsurl":"https://smt.ddev.site","httpurl":"http://smt.ddev.site","name":"smt","primary_url":"https://smt.ddev.site","shortroot":"~/Documents/Development/Docker/smt","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\sportauspuff","httpsurl":"https://sportauspuff.ddev.site","httpurl":"http://sportauspuff.ddev.site","name":"sportauspuff","primary_url":"https://sportauspuff.ddev.site","shortroot":"~/Documents/Development/Docker/sportauspuff","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\sportfahrwerk","httpsurl":"https://sportfahrwerk.ddev.site","httpurl":"http://sportfahrwerk.ddev.site","name":"sportfahrwerk","primary_url":"https://sportfahrwerk.ddev.site","shortroot":"~/Documents/Development/Docker/sportfahrwerk","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\velonity","httpsurl":"https://velonity.ddev.site","httpurl":"http://velonity.ddev.site","name":"velonity","primary_url":"https://velonity.ddev.site","shortroot":"~/Documents/Development/Docker/velonity","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\wari3","httpsurl":"https://wari3.ddev.site","httpurl":"http://wari3.ddev.site","name":"wari3","primary_url":"https://wari3.ddev.site","shortroot":"~/Documents/Development/Docker/wari3","status":"paused","type":"php"}],"time":"2021-03-03T19:39:39+01:00"}`;
            stdout = `{"level":"info","msg":"NAME             TYPE       LOCATION                                         URL                              STATUS \ndfwebseite       wordpress  ~/Documents/Development/Docker/dfwebseite                                         stopped\nfelgencalc       php        ~/Documents/Development/Docker/felgencalc                                         stopped\nfelgenexport     php        ~/Documents/Development/Docker/felgenexport                                       stopped\nfelgenshop       php        ~/Documents/Development/Docker/felgenshop                                         stopped\nlager            php        ~/Documents/Development/Docker/lager                                              stopped\nmitarbeiterddev  php        ~/Documents/Development/Docker/mitarbeiter_ddev                                   stopped\nsmt              php        ~/Documents/Development/Docker/smt                                                stopped\nsportauspuff     php        ~/Documents/Development/Docker/sportauspuff                                       stopped\nsportfahrwerk    php        ~/Documents/Development/Docker/sportfahrwerk     https://sportfahrwerk.ddev.site  running\nvelonity         php        ~/Documents/Development/Docker/velonity                                           stopped\nwari3            php        ~/Documents/Development/Docker/wari3                                              paused \n\nDDEV ROUTER STATUS: healthy","raw":[{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\dfwebseite","httpsurl":"https://dfwebseite.ddev.site","httpurl":"http://dfwebseite.ddev.site","name":"dfwebseite","primary_url":"https://dfwebseite.ddev.site","shortroot":"~/Documents/Development/Docker/dfwebseite","status":"stopped","type":"wordpress"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\felgencalc","httpsurl":"https://felgencalc.ddev.site","httpurl":"http://felgencalc.ddev.site","name":"felgencalc","primary_url":"https://felgencalc.ddev.site","shortroot":"~/Documents/Development/Docker/felgencalc","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\felgenexport","httpsurl":"https://felgenexport.ddev.site","httpurl":"http://felgenexport.ddev.site","name":"felgenexport","primary_url":"https://felgenexport.ddev.site","shortroot":"~/Documents/Development/Docker/felgenexport","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\felgenshop","httpsurl":"https://felgenshop.ddev.site","httpurl":"http://felgenshop.ddev.site","name":"felgenshop","primary_url":"https://felgenshop.ddev.site","shortroot":"~/Documents/Development/Docker/felgenshop","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\lager","httpsurl":"https://lager.ddev.site","httpurl":"http://lager.ddev.site","name":"lager","primary_url":"https://lager.ddev.site","shortroot":"~/Documents/Development/Docker/lager","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\mitarbeiter_ddev","httpsurl":"https://mitarbeiterddev.ddev.site","httpurl":"http://mitarbeiterddev.ddev.site","name":"mitarbeiterddev","primary_url":"https://mitarbeiterddev.ddev.site","shortroot":"~/Documents/Development/Docker/mitarbeiter_ddev","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\smt","httpsurl":"https://smt.ddev.site","httpurl":"http://smt.ddev.site","name":"smt","primary_url":"https://smt.ddev.site","shortroot":"~/Documents/Development/Docker/smt","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\sportauspuff","httpsurl":"https://sportauspuff.ddev.site","httpurl":"http://sportauspuff.ddev.site","name":"sportauspuff","primary_url":"https://sportauspuff.ddev.site","shortroot":"~/Documents/Development/Docker/sportauspuff","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\sportfahrwerk","httpsurl":"https://sportfahrwerk.ddev.site","httpurl":"http://sportfahrwerk.ddev.site","name":"sportfahrwerk","primary_url":"https://sportfahrwerk.ddev.site","shortroot":"~/Documents/Development/Docker/sportfahrwerk","status":"running","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\velonity","httpsurl":"https://velonity.ddev.site","httpurl":"http://velonity.ddev.site","name":"velonity","primary_url":"https://velonity.ddev.site","shortroot":"~/Documents/Development/Docker/velonity","status":"stopped","type":"php"},{"approot":"C:\\Users\\lasse.jacobsen\\Documents\\Development\\Docker\\wari3","httpsurl":"https://wari3.ddev.site","httpurl":"http://wari3.ddev.site","name":"wari3","primary_url":"https://wari3.ddev.site","shortroot":"~/Documents/Development/Docker/wari3","status":"paused","type":"php"}],"time":"2021-03-03T19:40:30+01:00"}`;
            let escaped = stdout.replace(/\r?\n|\r/g, "").replace(/\\/g,"\\\\");
            let json = JSON.parse(escaped);
            callback(json["raw"]);
        });
    }
}